# Версия git
git --version

# Регистрация для возможности работы с репозиториями комиты и тд и тп

git config --global user.name "GRVSA Alex"
git config --global user.email grvsa1980@gmail.com

#список установленых параметров
git config --list

#положение конфигурационного файла git
git config --list --show-origin

C:\Users\pavlikov\.gitconfig

#git следит только за специально установленой папкой на диске
#создать проект
git init
#либо клонировать
git clone

C:\Users\pavlikov>cd c:\

c:\>cd dj

c:\dj>dir
 Том в устройстве C не имеет метки.
 Серийный номер тома: 887A-B653

 Содержимое папки c:\dj

22.06.2022  13:34    <DIR>          .
22.06.2022  13:34    <DIR>          ..
15.06.2022  16:47             1 222 django_help.txt
15.06.2022  15:26    <DIR>          fp
22.06.2022  13:42               682 git_help.txt
15.06.2022  15:12    <DIR>          Include
15.06.2022  15:12    <DIR>          Lib
15.06.2022  15:12               122 pyvenv.cfg
15.06.2022  15:13    <DIR>          Scripts
               3 файлов          2 026 байт
               6 папок  306 479 542 272 байт свободно

c:\dj>git init
Initialized empty Git repository in C:/dj/.git/

#создали файл help.txt - добавляем его в репозиторий из консоли
git add .

# точка '.' означает добавить всё - можно добавлять отдельные файлы

git add help2.txt

#делаем коммит !!! кавычки двойные !!!! "" - одинарные не работают
git commit -m "первый коммит"

#изменили help.txt
git add help.txt
git commit
#выскочит консольный редактор с комментариями и статусом коммита

#изменение дефолтного редактора - главное что бы по названию запускался из консоли
#тобишь наверное можно забить просто путь до файла ???
git config --global core.editor notepad

#клонируем удаленный репозиторий - объект та же папка куда git init сделали
#после пути к репозиторию можно указать директорию куда клонировать

git clone https://github.com/grvsa/snake.git snk

#статус репозитория - показывает все измененные файлы которые не прошли коммит

git status

#файлы в репозитории могут быть остлеживаемые и неотслеживаемые
#git status будет показывать все - но git commit будут только остлеживаемые
#добавление в отслеживаемые через git add видимо

#сокращенный вывод статуса
git status -s

c:\dj>git status -s
 M git_help.txt #модифицированый отслеживаемый файл
 M help.txt     #модифицированый отслеживаемый файл
?? readme.txt   #неотслеживаемый не добавлен через git add

c:\dj>git status -s
 M git_help.txt
 M help.txt
 D help2.txt    #удаленный отслеживаемый файл
?? readme.txt


#просмотр изменений в измененных файлах ВЫХОД ЧЕРЕЗ "q" когда <END>
git diff

-----------------------------------------------------------------------------
c:\dj>git diff
diff --git a/git_help.txt b/git_help.txt
index f022603..7b610b4 100644
--- a/git_help.txt
+++ b/git_help.txt
@@ -76,3 +76,21 @@ git status
 #файлы в репозитории могут быть остлеживаемые и неотслеживаемые
 #git status будет показывать все - но git commit будут только остлеживаемые
 #добавление в отслеживаемые через git add видимо
+
+#сокращенный вывод статуса
+git status -s
+
+c:\dj>git status -s
+ M git_help.txt #модифицированый отслеживаемый файл
+ M help.txt     #модифицированый отслеживаемый файл
+?? readme.txt   #неотслеживаемый не добавлен через git add
+
+c:\dj>git status -s
+ M git_help.txt
+ M help.txt
+ D help2.txt    #удаленный отслеживаемый файл
+?? readme.txt
+
+
+#просмотр изменений в измененных файлах
+git diff
diff --git a/help.txt b/help.txt
index f328f0c..c28628e 100644
--- a/help.txt
+++ b/help.txt
@@ -1,3 +1,5 @@
 change some information

 add more info - commit 2
+
+New line for traced files
diff --git a/help2.txt b/help2.txt
deleted file mode 100644
index 4e0cee8..0000000
--- a/help2.txt
+++ /dev/null
@@ -1 +0,0 @@
-sdsdhkljlwj
(END)
+ M help.txt     #модифицированый отслеживаемый файл
+?? readme.txt   #неотслеживаемый не добавлен через git add
+
+c:\dj>git status -s
+ M git_help.txt
+ M help.txt
+ D help2.txt    #удаленный отслеживаемый файл
+?? readme.txt
+
+
+#просмотр изменений в измененных файлах
+git diff
diff --git a/help.txt b/help.txt
index f328f0c..c28628e 100644
--- a/help.txt
+++ b/help.txt
@@ -1,3 +1,5 @@
 change some information

 add more info - commit 2
+
+New line for traced files
diff --git a/help2.txt b/help2.txt
deleted file mode 100644
index 4e0cee8..0000000
--- a/help2.txt
+++ /dev/null
@@ -1 +0,0 @@
-sdsdhkljlwj

c:\dj>
-----------------------------------------------------------------------------

#git diff показывает изменения которые еще не попали в индекс ! через git add
#тобишь если их добавить в индекс но не делать коммит - git diff ничего не покажет
#в этом случае можно посмотреть индекс кэша

git diff --cached


#git diff показывает добавленые строки с '+' а убраные строки с '-'
----------------------------------------------------------------------------
diff --git a/help.txt b/help.txt
index c28628e..da3af33 100644
--- a/help.txt
+++ b/help.txt
@@ -1,5 +1,4 @@
 change some information

-add more info - commit 2                                             #удалены

 New line for traced files

c:\dj>git diff
diff --git a/git_help.txt b/git_help.txt
index 039c6e7..72f6088 100644
--- a/git_help.txt
+++ b/git_help.txt
@@ -179,3 +179,6 @@ c:\dj>
 #в этом случае можно посмотреть индекс кэша

 git diff --cached
+                                                                     #добавлены
+                                                                     #добавлены
+#git diff показывает добавленые строки с '+' а убраные строки с '-'  #добавлены
diff --git a/help.txt b/help.txt
index c28628e..da3af33 100644
--- a/help.txt
+++ b/help.txt
@@ -1,5 +1,4 @@
 change some information

-add more info - commit 2

 New line for traced files

 ----------------------------------------------------------------------------

#git commit -am "Comment" - позволяет добавлять сразу в индекс и в коммит

git commit -am "7th"

#откат изменений на непроиндексированых файлах - походу оба работают
git checkout -- file.name
git restore file.name

#откат изменений в файлах уже внесенных в индекс на коммит git add file.name

git reset HEAD help.txt
git restore --staged help.txt

#после этого можем через restore или checkout убрать изменения
#ВНИМАНИЕ !!! откат до СТАБИЛЬНОГО состояния
#тоесть 2 изменения внесенные последовательно в индекс без коммита
#УДАЛЯТЬСЯ ОБА !




#git log - история коммитов #- количество коммитов --stat - p
git log
git log -2          #только 2 последних коммита
git log -2 -p       #полная информация по коммиту
git log -2 --stat   #краткая информация по измененным файлам для коммитов
git log --pretty=oneline      #еще более красивый вывод - в одну линию

#по факту --pretty это строка форматирования =oneline это пресет
#можно задать свою строку форматирования

git log --pretty=format:"%h - %an, %ar : %s"


---------------------------------------------------------------------
oneline:
eeff8d24059c920f09731ed0cf27b574e604d4f6 (HEAD -> master) Delete from Index to remove modification
f1b9de7e672ac50142a117cdec711b23510a6c0c 7th commit
70957e0eada9f2dfcd4227ae29392dc4391b223e OK ! 6th
e1ddde79ccc3a28c08c9229d8298dfdc54a23780 Update git_help.txt
ea0021c764b504c77501c44a3ebc93c25cac0e2e Commit 4th
44930306b4ea6c3b44c2abc4e425667b50e74d36 Final commit 3rd
f6cd415b7454550da090290ae859effc9dd64c9c Эназер коммит ! смена редактора получилась !!!
5e2aeca4898030e9f9ec764e28a84463bc9596bf Comment
539206585d6fe0517b623386464974406a6325cc Первый коммит

format:"%h - %an, %ar : %s":

eeff8d2 - GRVSA Alex, 20 minutes ago : Delete from Index to remove modification
f1b9de7 - GRVSA Alex, 36 minutes ago : 7th commit
70957e0 - GRVSA Alex, 43 minutes ago : OK ! 6th
e1ddde7 - GRVSA Alex, 75 minutes ago : Update git_help.txt
ea0021c - GRVSA Alex, 88 minutes ago : Commit 4th
4493030 - GRVSA Alex, 2 hours ago : Final commit 3rd
f6cd415 - GRVSA Alex, 2 hours ago : Эназер коммит ! смена редактора получилась !!!
5e2aeca - GRVSA Alex, 2 hours ago : Comment
5392065 - GRVSA Alex, 2 hours ago : Первый коммит

--------------------------------------------------------------------

#Хэш сумма коммита по SHA1 - 40 символов к коммиту можно обратиться по хэшу
539206585d6fe0517b623386464974406a6325cc
5392065  #сокращенный хэш - при выводе сокращается до той длины пока он все еще
#отличается от существующих хэш


#git log - коммиты за определенное время

git log --since=2.week #все коммиты в течении 2 недель
git log --until=1.week #все коммиты до за неделю назад

git log --since=1.hour #все коммиты в течении 1 часа последнего
git log --until=1.hour #все коммиты сделаные до 1 часа назад

#за период
git log --since=2019-03-01 --until=2019-03-02

#найти коммиты в которых изменена определенная строка: параметр -S строка Git
git log -SGit -p

#коммиты по автору

git log --author="GRVSA Alex"

#найти автора и коммит который менял что либо .... ХЗ надо детально тестить

git blame help.txt

5e2aeca4 (GRVSA Alex 2022-06-22 13:53:53 +0300 1) change some information
f6cd415b (GRVSA Alex 2022-06-22 13:59:29 +0300 2)
f1b9de7e (GRVSA Alex 2022-06-22 15:19:34 +0300 3) Ееще один изменение
70957e0e (GRVSA Alex 2022-06-22 15:12:48 +0300 4) New line for traced files

#Игнорирование файлов - суть вот в чем:
#если однажды файл попал в репозиторий он по факту останется там навсегда
#в истории изменений.
#таким образом даже если он удален - он все равно там тоесть
#и при клонировании репозитория он будет в любом случае выгружен опять
#мелкие файлы ОК но большие - проблема
#решение .gitignore - ФАЙЛ СОЗДАЕТСЯ САМОСТОЯТЕЛЬНО !
#туда вносятся фильтры

gitignore.io -сайт для создания шаблонов файла .gitignore

#git игнорирует пустые папки !!! -решение: в папку добавляется пустой файла
# стандартное название .keep
#иногда необходимо что бы даже пустая папка была создана заранее
# для примера папка log

--------------------------------------------------------------------------
#список доступных веток проекта и текущая
git branch

#если после git branch указать название - git создаст новую ветку

git branch feature

#переключение на новую ветку "feature" название ветки
git checkout feature
git checkout newbranch

#переименовать ветку параметр -m

git branch -m newbranch to_delete

#удаление ветки параметр -D

git branch -D to_delete

git log --pretty=format:"%h - %d %s %cd" --graph


#слияние веток - необходимо находиться в той ветке в которую будут вливать
#побочную ветку

git merge test
git log --pretty=format:"%h - %d %s %cd" --graph

------------------------------------------------------------------------
c:\dj>git merge test
Merge made by the 'ort' strategy.
 branch.txt   |  0
 git_help.txt | 22 ++++++++++++++++++++++
 2 files changed, 22 insertions(+)
 create mode 100644 branch.txt

c:\dj>git log --pretty=format:"%h -%d %s %cd" --graph
*   6c486d2 - (HEAD -> master) Merge branch 'test' Fri Jun 24 10:23:40 2022 +0300
|\
| * 3b53ae4 - (test) br2 Fri Jun 24 10:19:50 2022 +0300
| * 9bb6c8b - branch.txt Fri Jun 24 09:46:52 2022 +0300
* | e34c849 - new file master.txt Fri Jun 24 10:22:53 2022 +0300
|/
* d9112db - Shome issue happend Wed Jun 22 16:41:15 2022 +0300
* 3849263 - Last commit for Today 6 lessons Yahoo ! Wed Jun 22 16:40:25 2022 +0300
* eeff8d2 - Delete from Index to remove modification Wed Jun 22 15:35:51 2022 +0300
* f1b9de7 - 7th commit Wed Jun 22 15:19:34 2022 +0300
* 70957e0 - OK ! 6th Wed Jun 22 15:12:48 2022 +0300
* e1ddde7 - Update git_help.txt Wed Jun 22 14:41:15 2022 +0300
* ea0021c - Commit 4th Wed Jun 22 14:28:19 2022 +0300
* 4493030 - Final commit 3rd Wed Jun 22 14:15:38 2022 +0300
* f6cd415 - Эназер коммит ! смена редактора получилась !!! Wed Jun 22 13:59:29 2022 +0300
* 5e2aeca - Comment Wed Jun 22 13:53:53 2022 +0300
* 5392065 - Первый коммит Wed Jun 22 13:50:16 2022 +0300
-------------------------------------------------------------------------

#алиасы - создание сокращенной команды которая будет запускать более длинную
#сама команда в двойных кавычках содержимое если включает кавычки то одинарные
#можно прописать вручную !! в файле HOME$/.gitconfig (ex c:\Users\Pavlikov\.gitconfig)

git config --global alias.gitlog "log --pretty=format:'%C(yellow)%h%Creset - %C(green)%d%Creset %s %C(bold blue)(%cn) %C(green)%cd%Creset' --graph --date=format:'%d.%m.%Y %H:%M'"

.gitconfig ------------------------------------------------------------------------------
#проще писать вручную сразу в конфиг - нет гемороя с кавычками - кавычки экранируются: \"
[alias]
	last = log -1 HEAD
	gg = log --pretty=format:\"%C(yellow)%h%Creset - %C(green)%d%Creset %s %C(bold blue)(%cn) %C(green)%cd%Creset\" --graph --date=format:\"%d.%m.%Y %H:%M\"
	hist = log --pretty=format:\"%h %ad | %s%d [%an]\" --graph --date=short
-----------------------------------------------------------------------------------------
#разрешение конфликтов
#когда сливаются 2 конфликтных файла в текущей ветке создается файл содержащий внесенные
#все внесенные изменения - корректируется вручную - потом добавить в индекс и коммит

git checkout master
git merge test
#исправляем hello.php
git add .
git commit -m "Conflict solved"


#удаленный репозиторий !
1. регистрируемся ни github
2. в editprofile жмем + (право верх) выбираем settings
3. выбираем SSH ...
4. для винды через ssh-keygen генерим ключ (название не меняем тогда
он сохранится в $HOME\.ssh\id_rsa и id_rsa.pub) кодовое слово тож не надо
5. из id_rsa.pub - копируем весь текст и во вкладке github ssh - вставляем его
6. создаем репозиторий с доступным именем
7. в след окне про доступ к репозиторию нажимаем на SSH и получаем
консольные команды для загрузки по ssh:
git remote add origin git@github.com:grvsa/hello_one.git

тут origin это название ветки мастер я так понял - можно сменить на github к примеру
git remote add github git@github.com:grvsa/hello_one.git

после этого можем запулить весь репозиторий (ветка master соответственно)

git push github master

если хотим склонировать репозиторий то

git clone git@github.com:grvsa/hello_one.git

если по ошибке создали не тот origin то може удалить
git remote remove origin
проверка доступных
git remote -v
origin  https://github.com/grvsa/hello.git (fetch)
origin  https://github.com/grvsa/hello.git (push)

git remote
github
origin

эмулируем командную разработку

есть текущий dj
склонируем в другую папку c:\
git clone git@github.com:grvsa/hello_one.git
там создаем index.php
git add .
git commit -m "Commit"
git push github master

переходим в dj

создаем phpinfo.php
git add .
git commit -m "Commit"
git push origin master

c:\dj>git push origin master
Enter passphrase for key '/c/Users/pavlikov/.ssh/id_rsa':
To github.com:grvsa/hello_one.git
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'github.com:grvsa/hello_one.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

тк репозитории теперь не совпадают

поэтому делаем pull
git pull origin master

теперь index.php есть и в dj поэтому снова делаем push
git push origin master


# самое главное братцы мои !!! при git init никакая venv не создается
создается только папка с доками и настройками репозитория !
таким образом гит клиент дергает все данные из этих конфигов.
тобишь 2 папки могут сущестовать одновременно и что бы проверить статус
репозиториев нужно просто зайти в них и получить статус
git status !

для синхронизации соответственно будет git pull origin master

так же при клонировании удаленного репозитория и при загрузке на удаленный



захуярили изменения из дома !
создается папка .git
там внутри будет файл конфиг где и будет прописано расположение удаленного
репозитория.

#лекция 9 !
# создание удаленных веток в github репозитории

#список веток в удаленном репозитории:
git branch -r

#создаем новую ветку fix_error
git checkout -b fix_error
#список локальных веток - автоматом перешли в fix_error при создании
git branch
* fix_error
  master
  test

#закидываем ветку в удаленный репозиторий
git push origin fix_error

#список веток в удаленном репозитории :
git branch -r

github/master
origin/fix_error
origin/master

#теперь переименуем локальную ветку в другую - что будет с удаленным репозиторием ?
git branch -m fix_error to_delete
git branch

master
test
* to_delete

#в удаленном репозитории без изменений
git branch -r

github/master
origin/fix_error
origin/master

#можем отправить её на сервер
git push origin to_delete
git branch -r

github/master
origin/fix_error
origin/master
origin/to_delete

#удалим локальную ветку to_delete для этого переместимся на другую ветку
git checkout master
git branch -D to_delete
git branch

* master
  test

  
